{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\mende\\\\Documents\\\\Angular\\\\FerreteriaDonPepe\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { USUARIOS } from './Misusuarios';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@angular/fire/compat/auth\";\nexport class SharedService {\n  constructor(firestore, afauth) {\n    this.firestore = firestore;\n    this.afauth = afauth;\n    this.user = USUARIOS;\n    this.getUid();\n  }\n\n  getuser() {\n    return this.user;\n  }\n\n  settam(tam, posicion) {\n    this.user[posicion].tam = tam;\n  } //CRUD\n\n\n  addArticle(article) {\n    return this.firestore.collection('articles').add(article);\n  }\n\n  getArticles() {\n    return this.firestore.collection('articles', ref => ref.orderBy('name', 'asc')).snapshotChanges();\n  }\n\n  deleteArticle(id) {\n    return this.firestore.collection('articles').doc(id).delete();\n  }\n\n  getArticle(id) {\n    return this.firestore.collection('articles').doc(id).snapshotChanges();\n  }\n\n  updateArticle(id, data) {\n    return this.firestore.collection('articles').doc(id).update(data);\n  } //USUARIOS\n\n\n  addUser(article) {\n    return this.firestore.collection('users').add(article);\n  }\n\n  deleteUser(id) {\n    return this.firestore.collection('users').doc(id).delete();\n  }\n\n  getUser(id) {\n    return this.firestore.collection('users').doc(id).snapshotChanges();\n  }\n\n  updateUser(id, data) {\n    return this.firestore.collection('users').doc(id).update(data);\n  }\n\n  register(email, password) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        return yield _this.afauth.createUserWithEmailAndPassword(email, password);\n      } catch (err) {\n        console.log(\"error en registro:  \", err);\n        return null;\n      }\n    })();\n  }\n\n  login(email, password) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        return yield _this2.afauth.signInWithEmailAndPassword(email, password);\n      } catch (err) {\n        console.log(\"error en login:  \", err);\n        return null;\n      }\n    })();\n  }\n\n  logout() {\n    this.afauth.signOut();\n  }\n\n  getUid() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const user = yield _this3.afauth.currentUser;\n\n      if (user === null) {\n        return null;\n      } else {\n        return user.uid;\n      }\n    })();\n  }\n\n  stateAuth() {\n    return this.afauth.authState;\n  }\n\n  getUserLogged() {\n    return this.afauth.authState;\n  }\n\n}\n\nSharedService.ɵfac = function SharedService_Factory(t) {\n  return new (t || SharedService)(i0.ɵɵinject(i1.AngularFirestore), i0.ɵɵinject(i2.AngularFireAuth));\n};\n\nSharedService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: SharedService,\n  factory: SharedService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/mende/Documents/Angular/FerreteriaDonPepe/src/app/shared.service.ts"],"names":["USUARIOS","i0","i1","i2","SharedService","constructor","firestore","afauth","user","getUid","getuser","settam","tam","posicion","addArticle","article","collection","add","getArticles","ref","orderBy","snapshotChanges","deleteArticle","id","doc","delete","getArticle","updateArticle","data","update","addUser","deleteUser","getUser","updateUser","register","email","password","createUserWithEmailAndPassword","err","console","log","login","signInWithEmailAndPassword","logout","signOut","currentUser","uid","stateAuth","authState","getUserLogged","ɵfac","SharedService_Factory","t","ɵɵinject","AngularFirestore","AngularFireAuth","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { USUARIOS } from './Misusuarios';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/fire/compat/firestore\";\r\nimport * as i2 from \"@angular/fire/compat/auth\";\r\nexport class SharedService {\r\n    constructor(firestore, afauth) {\r\n        this.firestore = firestore;\r\n        this.afauth = afauth;\r\n        this.user = USUARIOS;\r\n        this.getUid();\r\n    }\r\n    getuser() {\r\n        return this.user;\r\n    }\r\n    settam(tam, posicion) {\r\n        this.user[posicion].tam = tam;\r\n    }\r\n    //CRUD\r\n    addArticle(article) {\r\n        return this.firestore.collection('articles').add(article);\r\n    }\r\n    getArticles() {\r\n        return this.firestore.collection('articles', ref => ref.orderBy('name', 'asc')).snapshotChanges();\r\n    }\r\n    deleteArticle(id) {\r\n        return this.firestore.collection('articles').doc(id).delete();\r\n    }\r\n    getArticle(id) {\r\n        return this.firestore.collection('articles').doc(id).snapshotChanges();\r\n    }\r\n    updateArticle(id, data) {\r\n        return this.firestore.collection('articles').doc(id).update(data);\r\n    }\r\n    //USUARIOS\r\n    addUser(article) {\r\n        return this.firestore.collection('users').add(article);\r\n    }\r\n    deleteUser(id) {\r\n        return this.firestore.collection('users').doc(id).delete();\r\n    }\r\n    getUser(id) {\r\n        return this.firestore.collection('users').doc(id).snapshotChanges();\r\n    }\r\n    updateUser(id, data) {\r\n        return this.firestore.collection('users').doc(id).update(data);\r\n    }\r\n    async register(email, password) {\r\n        try {\r\n            return await this.afauth.createUserWithEmailAndPassword(email, password);\r\n        }\r\n        catch (err) {\r\n            console.log(\"error en registro:  \", err);\r\n            return null;\r\n        }\r\n    }\r\n    async login(email, password) {\r\n        try {\r\n            return await this.afauth.signInWithEmailAndPassword(email, password);\r\n        }\r\n        catch (err) {\r\n            console.log(\"error en login:  \", err);\r\n            return null;\r\n        }\r\n    }\r\n    logout() {\r\n        this.afauth.signOut();\r\n    }\r\n    async getUid() {\r\n        const user = await this.afauth.currentUser;\r\n        if (user === null) {\r\n            return null;\r\n        }\r\n        else {\r\n            return user.uid;\r\n        }\r\n    }\r\n    stateAuth() {\r\n        return this.afauth.authState;\r\n    }\r\n    getUserLogged() {\r\n        return this.afauth.authState;\r\n    }\r\n}\r\nSharedService.ɵfac = function SharedService_Factory(t) { return new (t || SharedService)(i0.ɵɵinject(i1.AngularFirestore), i0.ɵɵinject(i2.AngularFireAuth)); };\r\nSharedService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: SharedService, factory: SharedService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}